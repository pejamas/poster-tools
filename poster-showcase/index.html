<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Poster Showcase</title>
    <link rel="icon" type="image/svg+xml" href="../assets/favicon.png" />
    <link rel="stylesheet" href="styles.css" />
    <link href="https://fonts.googleapis.com/css2?family=Gabarito:wght@400;600;700&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@simonwep/pickr/dist/themes/monolith.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/@simonwep/pickr"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  </head>
  <body>
    <header>
      <div class="header-left">
        <a href="../index.html"><img src="../assets/favicon.png" alt="Mediux Logo" height="30" /></a>
        <h1>Poster Showcase</h1>
      </div>
      <div class="header-actions">
        <a href="../poster-overlay/" class="nav-link">Poster Overlay</a>
        <a href="../card-lab/" class="nav-link">Card Lab</a>
        <button id="saveConfigBtn" class="action-button">
          <img src="../assets/poster-showcase icons/save.svg" class="action-icon" />
          Save Config
        </button>
        <button id="loadConfigBtn" class="action-button">
          <img src="../assets/poster-showcase icons/upload.svg" class="action-icon" />
          Load Config
        </button>
      </div>
    </header>

    <div class="layout">
      <div class="sidebar">
        <div class="collapsible active">
          <div class="collapsible-header">
            <h3>API Search</h3>
            <div class="toggle-icon"></div>
          </div>
          <div class="collapsible-content">
            <input type="text" id="show-id" placeholder="Show ID: e.g. 123456" />
            <button id="connect-api-btn">Connect & Fetch Sets</button>
            <div id="api-status" class="status-disconnected">Not Connected</div>
            <div class="loading-spinner" id="api-loading"></div>
            <div class="set-selector" id="set-selector">
            </div>
          </div>
        </div>

        <div class="collapsible">
          <div class="collapsible-header">
            <h3>Creator Info</h3>
            <div class="toggle-icon"></div>
          </div>
          <div class="collapsible-content">
            <div class="creator-row">
              <input type="text" id="creator-name" placeholder="Creator Name" />
              <label for="creator-icon-upload" class="icon-upload-btn" title="Upload Creator Icon">
                <img src="../assets/poster-showcase icons/upload.svg" class="icon" />
              </label>
              <input type="file" id="creator-icon-upload" accept="image/*" />
            </div>
            <input type="text" id="set-id" placeholder="Footer Label: e.g. 12345" />
          </div>
        </div>

        <div class="collapsible">
          <div class="collapsible-header">
            <h3>Upload Files</h3>
            <div class="toggle-icon"></div>
          </div>
          <div class="collapsible-content">
            <label for="file-input" class="drop-zone">Upload Posters</label>
            <input type="file" id="file-input" multiple accept="image/*" />

            <label for="album-art-upload" class="drop-zone">Upload Album Art</label>
            <input type="file" id="album-art-upload" multiple accept="image/*" />

            <label for="titlecard-input" class="drop-zone">Upload Titlecards</label>
            <input type="file" id="titlecard-input" multiple accept="image/*" />

            <label for="logo-upload" class="drop-zone">Upload Clear Logo</label>
            <input type="file" id="logo-upload" accept="image/*" />

            <div class="slider-inline">
              <span class="toggle-label">Logo Scale</span>
              <input type="range" id="logo-scale" min="0.3" max="2" step="0.1" value="1" />
            </div>
          </div>
        </div>

        <div class="collapsible">
          <div class="collapsible-header">
            <h3>Layout Options</h3>
            <div class="toggle-icon"></div>
          </div>
          <div class="collapsible-content">
            <div class="inline-select">
              <span class="toggle-label">Posters Per Row</span>
              <select id="columns-select">
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4" selected>4</option>
                <option value="5">5</option>
                <option value="6">6</option>
              </select>
            </div>

            <div class="inline-select">
              <span class="toggle-label">Album Art Per Row</span>
              <select id="album-art-columns-select">
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4" selected>4</option>
                <option value="5">5</option>
                <option value="6">6</option>
              </select>
            </div>

            <div class="inline-select">
              <span class="toggle-label">Titlecards Per Row</span>
              <select id="titlecard-columns-select">
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5" selected>5</option>
              </select>
            </div>

            <div class="toggle-container">
              <span class="toggle-label">Posters Header</span>
              <label class="toggle-switch">
                <input type="checkbox" id="show-posters-header" checked />
                <span class="toggle-slider"></span>
              </label>
            </div>

            <div class="toggle-container">
              <span class="toggle-label">Album Art Header</span>
              <label class="toggle-switch">
                <input type="checkbox" id="show-album-art-header" checked />
                <span class="toggle-slider"></span>
              </label>
            </div>

            <div class="toggle-container">
              <span class="toggle-label">Titlecards Header</span>
              <label class="toggle-switch">
                <input type="checkbox" id="show-titlecards-header" checked />
                <span class="toggle-slider"></span>
              </label>
            </div>
          </div>
        </div>

        <div class="collapsible">
          <div class="collapsible-header">
            <h3>Background Options</h3>
            <div class="toggle-icon"></div>
          </div>
          <div class="collapsible-content">
            <label for="backdrop-upload" class="drop-zone">Upload Backdrop</label>
            <input type="file" id="backdrop-upload" accept="image/*" />

            <div class="slider-inline">
              <span class="toggle-label">Blur Amount</span>
              <input type="range" id="blur-amount" min="0" max="30" step="1" value="5" />
            </div>

            <div class="toggle-container">
              <span class="toggle-label">Use Backdrop</span>
              <label class="toggle-switch">
                <input type="checkbox" id="use-backdrop-toggle" />
                <span class="toggle-slider"></span>
              </label>
            </div>

            <div class="gradient-section">
              <div class="gradient-row">
                <div class="gradient-col">
                  <span class="mini-label">Gradient Start</span>
                  <div id="bg-start-pickr" class="pickr-bar-container"></div>
                </div>
                <div class="gradient-col">
                  <span class="mini-label">Gradient End</span>
                  <div id="bg-end-pickr" class="pickr-bar-container"></div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="section-separator"></div>

        <div class="sidebar-action-row">
          <button id="downloadBtn" class="icon-button teal" title="Download">
            <img src="../assets/poster-showcase icons/download.svg" class="icon" />
          </button>
          <button id="resetBtn" class="icon-button red" title="Reset">
            <img src="../assets/poster-showcase icons/refresh-cw.svg" class="icon" />
          </button>
        </div>
      </div>

      <div class="main">
        <div id="export-wrapper">
          <div id="export-bg-container">
            <img id="export-background-image" />
          </div>
          <img id="logo-preview" alt="Clear Logo" />

          <h2 class="section-title" id="posters-header">Posters</h2>
          <div id="poster-grid-wrapper" class="grid-section">
            <div id="poster-grid"></div>
          </div>

          <h2 class="section-title" id="album-art-header">Album Art</h2>
          <div id="album-art-grid-wrapper" class="grid-section">
            <div id="album-art-grid"></div>
          </div>

          <hr style="width: 100%; border-color: rgba(255, 255, 255, 0.2)" />

          <h2 class="section-title" id="titlecards-header">Titlecards</h2>
          <div id="titlecard-grid-wrapper" class="grid-section">
            <div id="titlecard-grid"></div>
          </div>

          <div class="set-id-line" id="set-id-line"></div>
          <div class="credit-line">
            <div class="created-by">
              <div class="creator-icon-container">
                <img id="creator-icon" src="" alt="" />
              </div>
              <div class="creator-text">Created by&nbsp;<span id="credit-text"></span></div>
            </div>
            <div class="powered-by">
              <span>mediux.pro</span>
              <img src="../assets/mediux.svg" alt="Mediux Icon" />
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="custom-confirm-overlay" class="custom-overlay">
      <div class="custom-modal">
        <h3>Reset Confirmation</h3>
        <p>Are you sure you want to reset the form? You will lose all current uploads and settings.</p>
        <div class="custom-buttons">
          <button id="confirmYes" class="custom-btn custom-btn-red">Yes</button>
          <button id="confirmNo" class="custom-btn custom-btn-gray">No</button>
        </div>
      </div>
    </div>

    <div id="save-confirm-overlay" class="custom-overlay">
      <div class="custom-modal">
        <h3>Settings Saved</h3>
        <div id="save-confirm-content"></div>
        <div class="custom-buttons">
          <button id="saveConfirmOk" class="custom-btn custom-btn-blue">OK</button>
        </div>
      </div>
    </div>

    <div id="load-confirm-overlay" class="custom-overlay">
      <div class="custom-modal">
        <h3>Settings Loaded</h3>
        <p>Your saved configuration has been loaded successfully.</p>
        <div class="custom-buttons">
          <button id="loadConfirmOk" class="custom-btn custom-btn-blue">OK</button>
        </div>
      </div>
    </div>

    <div id="loading-overlay" class="custom-overlay">
      <div class="custom-modal loading-modal">
        <div class="loading-spinner-large"></div>
        <h3 id="loading-title">Loading Assets</h3>
        <p id="loading-message">Please wait while assets are being downloaded...</p>
        <div class="progress-container">
          <div id="loading-progress-bar" class="progress-bar"></div>
        </div>
        <p id="loading-details">Starting download...</p>
      </div>
    </div>
    <script src="app.js"></script>
  </body>
</html>
